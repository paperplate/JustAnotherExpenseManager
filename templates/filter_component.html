<!-- Enhanced Reusable Filter Component -->
<div class="filter-section" data-target-url="{{ target_url }}" data-target-element="{{ target_element }}">
    <div class="filter-group">
        <label for="time-range">Time Range:</label>
        <select id="time-range" onchange="filterByTimeRange(this.value)">
            <option value="">All Time</option>
            <option value="current_month">Current Month</option>
            <option value="3_months">Last 3 Months</option>
            <option value="6_months" {% if default_range == '6_months' %}selected{% endif %}>Last 6 Months</option>
            <option value="1_year">Last Year</option>
            <option value="custom">Custom Range...</option>
        </select>
    </div>
    
    <div class="filter-group">
        <label for="category-filter">Filter by Categories:</label>
        <div class="multi-select-wrapper">
            <div class="multi-select-display" id="category-display" onclick="toggleCategoryDropdown()">
                <span id="category-selected-text">All Categories</span>
                <span class="dropdown-arrow">▼</span>
            </div>
            <div class="multi-select-dropdown" id="category-dropdown" style="display: none;">
                <div class="multi-select-option">
                    <label>
                        <input type="checkbox" value="" onchange="updateCategorySelection()" checked> All Categories
                    </label>
                </div>
                <div id="category-options-list">
                    <!-- Categories will be loaded here -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="filter-group">
        <label for="tag-filter">Filter by Tags:</label>
        <div class="multi-select-wrapper">
            <div class="multi-select-display" id="tag-display" onclick="toggleTagDropdown()">
                <span id="tag-selected-text">All Tags</span>
                <span class="dropdown-arrow">▼</span>
            </div>
            <div class="multi-select-dropdown" id="tag-dropdown" style="display: none;">
                <div class="multi-select-option">
                    <label>
                        <input type="checkbox" value="" onchange="updateTagSelection()" checked> All Tags
                    </label>
                </div>
                <div id="tag-options-list">
                    <!-- Tags will be loaded here -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Custom date range picker (hidden by default) -->
<div id="custom-range-picker">
    <div>
        <div>
            <label for="start-date">Start Date:</label>
            <input type="date" id="start-date">
        </div>
        <div>
            <label for="end-date">End Date:</label>
            <input type="date" id="end-date">
        </div>
        <button class="btn" onclick="applyCustomRange()">Apply</button>
    </div>
</div>

